<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>When to Invoke | FairToT for LLM Fairness in Toxicity Assessment</title>
  <meta name="description" content="FairToT: an inference-time framework that refines LLM fairness with prompt-guided toxicity assessment. Accepted to TheWebConference 2026 (Web4Good)." />
  <meta property="og:title" content="When to Invoke: Refining LLM Fairness with Toxicity Assessment" />
  <meta property="og:description" content="Accepted to TheWebConference 2026 (Web4Good). FairToT refines LLM fairness for implicit hate detection using interpretable indicators." />
  <meta property="og:type" content="website" />
  <link rel="icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3ctext y='.9em' font-size='72'%3eFT%3c/text%3e%3c/svg%3e" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --ink: #0f172a;
      --muted: #4b5563;
      --surface: rgba(255, 255, 255, 0.78);
      --line: rgba(148, 163, 184, 0.35);
      --accent-a: #f97316;
      --accent-b: #06b6d4;
      --accent-c: #22c55e;
      --shadow: 0 24px 60px rgba(15, 23, 42, 0.15);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "IBM Plex Sans", system-ui, -apple-system, sans-serif;
      color: var(--ink);
      background:
        radial-gradient(900px 600px at 8% 15%, rgba(249, 115, 22, 0.18), transparent 60%),
        radial-gradient(900px 600px at 90% 12%, rgba(6, 182, 212, 0.2), transparent 55%),
        radial-gradient(900px 700px at 50% 90%, rgba(34, 197, 94, 0.2), transparent 60%),
        #f8fafc;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .container {
      width: min(1120px, 92%);
      margin: 0 auto;
    }

    .glass {
      background: var(--surface);
      backdrop-filter: blur(16px);
      border: 1px solid var(--line);
      border-radius: 24px;
    }

    .gradient-text {
      background: linear-gradient(120deg, var(--accent-a), var(--accent-b), var(--accent-c));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .gradient-text-animated {
      background: linear-gradient(120deg, var(--accent-a), var(--accent-b), var(--accent-c));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: gradientShift 6s ease infinite;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .hero {
      padding: 140px 0 80px;
      position: relative;
      overflow: hidden;
    }

    .hero::after {
      content: "";
      position: absolute;
      inset: 0;
      background-image: linear-gradient(rgba(148, 163, 184, 0.2) 1px, transparent 1px),
        linear-gradient(90deg, rgba(148, 163, 184, 0.2) 1px, transparent 1px);
      background-size: 48px 48px;
      opacity: 0.35;
      mask-image: radial-gradient(circle at top, black 20%, transparent 70%);
      z-index: -1;
    }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 10;
      padding: 20px 0;
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 22px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-family: "Space Grotesk", system-ui, sans-serif;
    }

    .brand-mark {
      width: 44px;
      height: 44px;
      border-radius: 14px;
      background: linear-gradient(140deg, var(--accent-a), var(--accent-b));
      display: grid;
      place-items: center;
      color: white;
      font-weight: 700;
      letter-spacing: 1px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.2);
    }

    .nav-links {
      display: flex;
      gap: 20px;
      font-size: 14px;
      font-weight: 500;
      color: var(--muted);
    }

    .nav-links a:hover {
      color: var(--ink);
    }

    .hero-grid {
      display: grid;
      gap: 48px;
      align-items: center;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      color: #0f172a;
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .pulse-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent-c);
      position: relative;
    }

    .pulse-dot::after {
      content: "";
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      border: 1px solid rgba(34, 197, 94, 0.5);
      animation: pulse 2.6s ease-in-out infinite;
    }

    @keyframes pulse {
      0% { transform: scale(0.6); opacity: 0.2; }
      70% { transform: scale(1.6); opacity: 0; }
      100% { opacity: 0; }
    }

    h1, h2, h3 {
      font-family: "Space Grotesk", system-ui, sans-serif;
      margin: 0;
    }

    h1 {
      font-size: clamp(2.5rem, 5vw, 3.6rem);
      line-height: 1.1;
    }

    p {
      line-height: 1.6;
      color: var(--muted);
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 20px;
    }

    .btn {
      padding: 12px 20px;
      border-radius: 14px;
      font-weight: 600;
      font-size: 14px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border: 1px solid transparent;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(140deg, var(--accent-a), var(--accent-b));
      background-size: 200% 200%;
      color: white;
      box-shadow: var(--shadow);
      animation: gradientShift 6s ease infinite;
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.85);
      border-color: var(--line);
      color: var(--ink);
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 18px;
      margin-top: 32px;
    }

    .stat-card {
      padding: 16px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.3);
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
    }

    section {
      padding: 72px 0;
    }

    .section-title {
      margin-bottom: 32px;
      text-align: center;
    }

    .section-title h2 {
      font-size: clamp(2.4rem, 4vw, 3.6rem);
      letter-spacing: -0.01em;
    }

    .section-title p {
      max-width: 680px;
      margin: 12px auto 0;
    }

    .grid-3 {
      display: grid;
      gap: 22px;
    }

    .card {
      padding: 24px;
      border-radius: 22px;
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.08);
      transition: transform 0.35s ease, box-shadow 0.35s ease;
      cursor: pointer;
    }

    .card:hover {
      transform: translateY(-8px) scale(1.01);
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.18);
    }

    .card h3 {
      margin-bottom: 10px;
    }

    .media-card {
      display: grid;
      gap: 20px;
      align-items: center;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    .media-card.primary-image {
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 0.9fr);
    }

    .media-card.primary-image img {
      width: 100%;
      border-radius: 20px;
      box-shadow: 0 18px 50px rgba(15, 23, 42, 0.18);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .caption {
      font-size: 13px;
      color: #64748b;
      margin-top: 10px;
    }

    .case-shell {
      background: rgba(15, 23, 42, 0.92);
      color: #f8fafc;
      border-radius: 26px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 30px 70px rgba(15, 23, 42, 0.35);
      padding: 24px;
    }

    .case-step {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(148, 163, 184, 0.12);
      color: #e2e8f0;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.25s ease, background 0.25s ease;
    }

    .case-step.active {
      background: linear-gradient(120deg, rgba(249, 115, 22, 0.5), rgba(6, 182, 212, 0.45));
      color: #0f172a;
      transform: translateY(-2px);
    }

    .case-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      margin-top: 18px;
    }

    .case-card {
      background: rgba(15, 23, 42, 0.65);
      border: 1px solid rgba(148, 163, 184, 0.25);
      border-radius: 18px;
      padding: 16px;
      font-size: 13px;
      color: #cbd5f5;
    }

    .case-metric {
      font-size: 22px;
      font-weight: 700;
      color: #f8fafc;
      margin-top: 6px;
    }

    .case-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
      margin-top: 12px;
      color: #e2e8f0;
    }

    .case-table th,
    .case-table td {
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      padding: 6px 8px;
      text-align: left;
      vertical-align: top;
    }

    .case-table th {
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 10px;
      color: #94a3b8;
    }

    .authors {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 14px;
      color: #334155;
      margin-top: 16px;
    }

    .authors span {
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    footer {
      padding: 40px 0 60px;
      text-align: center;
      color: #64748b;
      font-size: 13px;
    }

    @media (min-width: 900px) {
      .hero-grid {
        grid-template-columns: 1.1fr 0.9fr;
      }

      .grid-3 {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 760px) {
      .nav-links {
        display: none;
      }

      header {
        position: static;
      }

      .hero {
        padding-top: 80px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container glass nav">
      <div class="brand">
        <div class="brand-mark">FT</div>
        <div>
          <div style="font-size: 14px; font-weight: 600;">FairToT</div>
          <div style="font-size: 12px; color: #64748b;">When to Invoke</div>
        </div>
      </div>
      <nav class="nav-links">
        <a href="#contributions">Contributions</a>
        <a href="#case-study">Case Study</a>
        <a href="#results">Experiments</a>
        <a href="#authors">Authors</a>
      </nav>
      <div class="hero-actions" style="margin: 0;">
        <a class="btn btn-secondary" href="#" aria-disabled="true">Paper (soon)</a>
        <a class="btn btn-primary" href="https://github.com/Aisuko/fair-tot" target="_blank" rel="noreferrer">GitHub</a>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-grid">
        <div>
          <div class="hero-badge">
            <span class="pulse-dot"></span>
            Web4Good - TheWebConference 2026 - Accepted
          </div>
          <h1>
            <span class="gradient-text">When to Invoke</span><br />
            Refining LLM Fairness<br />
            with Toxicity Assessment
          </h1>
          <p>
            FairToT is an inference-time framework that identifies when demographic inconsistencies are likely to
            emerge in toxicity scoring, and selectively invokes corrective prompting to keep assessments fair, stable,
            and interpretable for implicit hate speech.
          </p>
          <div class="hero-actions">
            <a class="btn btn-secondary" href="#" aria-disabled="true">Paper (soon)</a>
            <a class="btn btn-primary" href="https://github.com/Aisuko/fair-tot" target="_blank" rel="noreferrer">GitHub</a>
          </div>
          <div class="stats">
            <div class="stat-card">
              <div class="stat-value gradient-text">437</div>
              <div>Valid Submissions</div>
            </div>
            <div class="stat-card">
              <div class="stat-value gradient-text">95</div>
              <div>Accepted Papers</div>
            </div>
            <div class="stat-card">
              <div class="stat-value gradient-text">21.7%</div>
              <div>Acceptance Rate</div>
            </div>
            <div class="stat-card">
              <div class="stat-value gradient-text">2026</div>
              <div>Conference Year</div>
            </div>
          </div>
        </div>
        <div class="glass card">
          <h3>Why FairToT?</h3>
          <p>
            LLMs can overreact to subtle demographic cues in implicit hate speech. FairToT monitors variance across
            entity substitutions and decides when additional assessment is necessary, improving fairness without
            retraining the model.
          </p>
          <img src="imgs/Motivation.png" alt="Motivation examples of fair vs. biased toxicity scoring" style="margin-top: 14px; border-radius: 16px; border: 1px solid rgba(148, 163, 184, 0.35);" />
          <div class="card" style="margin-top: 18px;">
            <strong class="gradient-text">Key Indicators</strong>
            <p style="margin-top: 8px;">
              Sentence Fairness Variance (SFV) and Entity Fairness Dispersion (EFD) detect instability across groups
              and guide selective re-assessment.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="contributions">
      <div class="container">
        <div class="section-title">
          <h2><span class="gradient-text-animated">Core Contributions</span></h2>
          <p>FairToT introduces an inference-time fairness refinement pipeline tailored to implicit hate speech.</p>
        </div>
        <div class="grid-3">
          <div class="card">
            <h3>Invocation Strategy</h3>
            <p>
              The first work to ask when fairness correction should be invoked during inference for implicit hate
              speech.
            </p>
          </div>
          <div class="card">
            <h3>Prompt-Guided Refinement</h3>
            <p>
              FairToT selectively applies structured prompting to improve consistency without retraining or model
              access.
            </p>
          </div>
          <div class="card">
            <h3>Interpretable Indicators</h3>
            <p>
              Sentence Fairness Variance (SFV) and Entity Fairness Dispersion (EFD) quantify instability across
              demographic substitutions.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="case-study">
      <div class="container">
        <div class="section-title">
          <h2><span class="gradient-text-animated">Case Study</span></h2>
          <p>
            End-to-end fairness evaluation on five records, following the FairToT calculation pipeline step by step.
          </p>
        </div>
        <div class="case-shell">
          <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
            <div>
              <div style="font-size: 12px; text-transform: uppercase; letter-spacing: 0.18em; color: #94a3b8;">Live Trace</div>
              <div style="font-size: 20px; font-weight: 700;">Fairness Metrics on 5 Records</div>
            </div>
            <div style="display: flex; gap: 8px; flex-wrap: wrap;" id="case-steps">
              <button class="case-step active" data-step="0">Step 1</button>
              <button class="case-step" data-step="1">Step 2</button>
              <button class="case-step" data-step="2">Step 3</button>
              <button class="case-step" data-step="3">Step 4</button>
              <button class="case-step" data-step="4">Step 5</button>
              <button class="case-step" data-step="5">Step 6</button>
              <button class="case-step" data-step="6">Step 7</button>
            </div>
          </div>
          <div class="case-grid">
            <div class="case-card" id="case-summary">
              <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.16em; color: #94a3b8;">Summary</div>
              <div class="case-metric" id="case-title">LLM baseline fairness score (ENR)</div>
              <div id="case-desc" style="margin-top: 8px;">
                Five records receive baseline ENR toxicity scores to anchor per-entity variance.
              </div>
            </div>
            <div class="case-card">
              <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.16em; color: #94a3b8;">Metrics</div>
              <div class="case-metric" id="case-metric">ENR range: 0.85 - 0.99</div>
              <div style="margin-top: 8px;" id="case-note">Record 1 to 5 baseline values stabilize the downstream variance check.</div>
            </div>
            <div class="case-card">
              <div style="font-size: 11px; text-transform: uppercase; letter-spacing: 0.16em; color: #94a3b8;">Key Output</div>
              <div class="case-metric" id="case-output">R1 = 0.88, R2 = 0.87, R3 = 0.99</div>
              <div style="margin-top: 8px;" id="case-footer">Entity substitutions follow next to reveal dispersion.</div>
            </div>
          </div>
          <table class="case-table" id="case-table">
            <thead>
              <tr>
                <th>Record</th>
                <th>Snippet / Value</th>
                <th>Highlights</th>
              </tr>
            </thead>
            <tbody id="case-table-body">
              <tr>
                <td>R1</td>
                <td>well they average 100 iq... ENR 0.88</td>
                <td>baseline toxicity anchor</td>
              </tr>
              <tr>
                <td>R2</td>
                <td>people that only consider... ENR 0.87</td>
                <td>baseline toxicity anchor</td>
              </tr>
              <tr>
                <td>R3</td>
                <td>jew hatred is inherent... ENR 0.99</td>
                <td>baseline toxicity anchor</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="results">
      <div class="container">
        <div class="section-title">
          <h2><span class="gradient-text-animated">Experiments at a Glance</span></h2>
          <p>Benchmarks focus on implicit hate speech, with LLMs and baselines evaluated for fairness stability.</p>
        </div>
        <div class="grid-3">
          <div class="card">
            <h3>Datasets</h3>
            <p>Latent Hatred, ToxiGen, and Offensive Language datasets for implicit hate evaluation.</p>
          </div>
          <div class="card">
            <h3>Models</h3>
            <p>BERT, HateBERT, DeBERTa, GPT-3.5-turbo, and Llama-3.1-8B-Instruct.</p>
          </div>
          <div class="card">
            <h3>Findings</h3>
            <p>FairToT reduces group-level disparities while keeping toxicity predictions stable and reliable.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="authors">
      <div class="container">
        <div class="section-title">
          <h2><span class="gradient-text-animated">Authors</span></h2>
          <p>Equal contribution marked with ★. Corresponding author marked with ✉.</p>
        </div>
        <div class="grid-3">
          <div class="card">
            <h3>Jing Ren ★</h3>
            <p>RMIT University · Melbourne, Australia</p>
          </div>
          <div class="card">
            <h3>Bowen Li ★</h3>
            <p>RMIT University · Melbourne, Australia</p>
          </div>
          <div class="card">
            <h3>Ziqi Xu ✉</h3>
            <p>RMIT University · Melbourne, Australia</p>
          </div>
          <div class="card">
            <h3>Renqiang Luo</h3>
            <p>Jilin University · Changchun, China</p>
          </div>
          <div class="card">
            <h3>Shuo Yu</h3>
            <p>Dalian University of Technology · Dalian, China</p>
          </div>
          <div class="card">
            <h3>Xin Ye</h3>
            <p>Dalian University of Technology · Dalian, China</p>
          </div>
          <div class="card">
            <h3>Haytham Fayek</h3>
            <p>RMIT University · Melbourne, Australia</p>
          </div>
          <div class="card">
            <h3>Xiaodong Li</h3>
            <p>RMIT University · Melbourne, Australia</p>
          </div>
          <div class="card">
            <h3>Feng Xia</h3>
            <p>RMIT University · Melbourne, Australia</p>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div class="container">
      FairToT - When to Invoke: Refining LLM Fairness with Toxicity Assessment - TheWebConference 2026
    </div>
  </footer>
  <script>
    const caseData = [
      {
        title: "LLM baseline fairness score (ENR)",
        desc: "Five records receive baseline ENR toxicity scores to anchor per-entity variance.",
        metric: "ENR range: 0.85 - 0.99",
        note: "Record 1 to 5 baseline values stabilize the downstream variance check.",
        output: "R1 = 0.88, R2 = 0.87, R3 = 0.99",
        footer: "Entity substitutions follow next to reveal dispersion.",
        rows: [
          ["R1", "well they average 100 iq... ENR 0.88", "baseline toxicity anchor"],
          ["R2", "people that only consider... ENR 0.87", "baseline toxicity anchor"],
          ["R3", "jew hatred is inherent... ENR 0.99", "baseline toxicity anchor"]
        ]
      },
      {
        title: "Entity-conditioned scores",
        desc: "Each record is scored across four entities (Blacks, Jews, Muslims, White people).",
        metric: "cs_q_e_parsed vectors",
        note: "Entity variants expose demographic sensitivity.",
        output: "R1 [0.92, 0.95, 0.93, 0.01]",
        footer: "We now compute sigma_q_e per record.",
        rows: [
          ["R1", "[0.92, 0.95, 0.93, 0.01]", "entity scores"],
          ["R2", "[0.22, 0.45, 0.67, 0.01]", "entity scores"],
          ["R3", "[0.12, 0.14, 0.34, 0.54]", "entity scores"]
        ]
      },
      {
        title: "sigma_q_e = entity score - ENR",
        desc: "Compute per-entity offsets to isolate demographic shifts.",
        metric: "sigma vectors",
        note: "Offsets show how much each entity shifts toxicity.",
        output: "R1 [0.04, 0.07, 0.05, -0.87]",
        footer: "Next we aggregate variance per record.",
        rows: [
          ["R1", "[0.04, 0.07, 0.05, -0.87]", "offsets vs ENR"],
          ["R2", "[-0.65, -0.42, -0.20, -0.86]", "offsets vs ENR"],
          ["R3", "[-0.87, -0.85, -0.65, -0.45]", "offsets vs ENR"]
        ]
      },
      {
        title: "Per-record population variance (theta_cf)",
        desc: "Compute variance across the four entities for each record.",
        metric: "theta_cf values",
        note: "Variance highlights instability per sentence.",
        output: "R1 0.159969, R2 0.061069, R3 0.029075",
        footer: "We combine local variance with global bias priors.",
        rows: [
          ["R1", "theta_cf = 0.159969", "high dispersion"],
          ["R2", "theta_cf = 0.061069", "medium dispersion"],
          ["R3", "theta_cf = 0.029075", "low dispersion"]
        ]
      },
      {
        title: "Bias detection (local + global)",
        desc: "Compute R = 0.5 * theta_cf_norm + 0.5 * theta_E to flag mitigation.",
        metric: "R threshold = 0.35",
        note: "All five records exceed the threshold and trigger mitigation.",
        output: "R1 0.749747, R2 0.551947, R3 0.487960",
        footer: "Mitigation reduces variance in the next step.",
        rows: [
          ["R1", "R = 0.749747", "mitigate"],
          ["R2", "R = 0.551947", "mitigate"],
          ["R3", "R = 0.487960", "mitigate"]
        ]
      },
      {
        title: "Sentence Fairness Variance (SFV)",
        desc: "SFV summarizes the mean and population std of theta_cf across records.",
        metric: "Before: 0.104666 +/- 0.050488",
        note: "After mitigation: 0.000069 +/- 0.000000",
        output: "SFV drops to near-zero variance",
        footer: "Next we measure entity-level dispersion.",
        rows: [
          ["Before", "0.104666 +/- 0.050488", "unstable"],
          ["After", "0.000069 +/- 0.000000", "stable"],
          ["Change", "delta -0.104597", "improvement"]
        ]
      },
      {
        title: "Entity Fairness Dispersion (EFD)",
        desc: "EFD averages per-entity variance across records.",
        metric: "Before: 0.097472 +/- 0.051063",
        note: "After mitigation: 0.002496 +/- 0.000000",
        output: "EFD shrinks across all entities",
        footer: "Case study shows strong fairness gains.",
        rows: [
          ["Before", "0.097472 +/- 0.051063", "high dispersion"],
          ["After", "0.002496 +/- 0.000000", "low dispersion"],
          ["Change", "delta -0.094976", "improvement"]
        ]
      }
    ];

    const steps = document.querySelectorAll(".case-step");
    const titleEl = document.getElementById("case-title");
    const descEl = document.getElementById("case-desc");
    const metricEl = document.getElementById("case-metric");
    const noteEl = document.getElementById("case-note");
    const outputEl = document.getElementById("case-output");
    const footerEl = document.getElementById("case-footer");
    const tableBody = document.getElementById("case-table-body");

    function renderCaseStep(index) {
      const data = caseData[index];
      titleEl.textContent = data.title;
      descEl.textContent = data.desc;
      metricEl.textContent = data.metric;
      noteEl.textContent = data.note;
      outputEl.textContent = data.output;
      footerEl.textContent = data.footer;
      tableBody.innerHTML = data.rows
        .map((row) => `<tr><td>${row[0]}</td><td>${row[1]}</td><td>${row[2]}</td></tr>`)
        .join("");
      steps.forEach((step) => step.classList.remove("active"));
      steps[index].classList.add("active");
    }

    steps.forEach((step) => {
      step.addEventListener("click", () => {
        renderCaseStep(Number(step.dataset.step));
      });
    });

    let autoStep = 0;
    setInterval(() => {
      autoStep = (autoStep + 1) % caseData.length;
      renderCaseStep(autoStep);
    }, 5200);
  </script>
</body>
</html>
